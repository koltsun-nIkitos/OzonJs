(()=>{"use strict";function e(){const e=document.querySelectorAll(".goods .card"),t=document.getElementById("discount-checkbox"),c=document.getElementById("min"),n=document.getElementById("max"),o=document.querySelector(".catalog-list li.active");e.forEach((e=>{const r=e.querySelector(".card-price"),l=parseFloat(r.textContent),d=e.querySelector(".card-sale");e.parentNode.style.display="",(c.value&&l<c.value||l>n.value&&n.value||t.checked&&!d||o&&e.dataset.category!==o.textContent&&o)&&(e.parentNode.style.display="none")}))}(function(){const e=document.querySelector(".goods");return fetch("../db/db.json").then((e=>{if(e.ok)return e.json();throw new Error("–î–∞–Ω–Ω—ã–µ –Ω–µ –±—ã–ª–∏ –ø–æ–ª—É—á–µ–Ω—ã, –æ—à–∏–±–∫–∞: "+e.status)})).then((e=>e)).catch((t=>{console.error(t),e.innerHTML='<div style="color: red; font-size: 30px;">–£–ø—Å, —á—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫! :(</div>'}))})().then((t=>{!function(e){const t=document.querySelector(".goods");e.goods.forEach((e=>{const c=document.createElement("div");c.className="col-12 col-md-6 col-lg-4 col-xl-3",c.innerHTML=`\n            <div class="card" data-category="${e.category}"> \n                ${e.sale?'<div class="card-sale">üî•Hot Saleüî•</div>':""}\n                <div class="card-img-wrapper">\n                    <span class="card-img-top"\n                        style="background-image: url('${e.img}')"></span>\n                </div>\n                <div class="card-body justify-content-between">\n                    <div class="card-price" style="${e.sale?"color: red;":""}">${e.price} ‚ÇΩ</div>\n                    <h5 class="card-title">${e.title}</h5>\n                    <button class="btn btn-primary">–í –∫–æ—Ä–∑–∏–Ω—É</button>\n                </div>\n            </div>\n        `,t.appendChild(c)}))}(t),function(){const t=document.querySelectorAll(".goods .card"),c=document.querySelector(".catalog-list"),n=document.querySelector(".catalog"),o=document.querySelector(".catalog-button"),r=new Set,l=document.querySelector(".filter-title h5");t.forEach((e=>{r.add(e.dataset.category)})),r.forEach((e=>{const t=document.createElement("li");t.textContent=e,c.appendChild(t)}));const d=c.querySelectorAll("li");o.addEventListener("click",(t=>{n.style.display?n.style.display="":n.style.display="block","LI"===t.target.tagName&&(d.forEach((e=>{e===t.target?e.classList.add("active"):e.classList.remove("active")})),l.textContent=t.target.textContent,e())}))}(),document.querySelectorAll(".filter-check_checkbox").forEach((e=>{e.addEventListener("change",(function(){this.checked?this.nextElementSibling.classList.add("checked"):this.nextElementSibling.classList.remove("checked")}))})),function(){const t=document.querySelectorAll(".goods .card"),c=document.getElementById("discount-checkbox"),n=document.getElementById("min"),o=document.getElementById("max"),r=document.querySelector(".search-wrapper_input"),l=document.querySelector(".search-btn");c.addEventListener("click",e),n.addEventListener("change",e),o.addEventListener("change",e),l.addEventListener("click",(()=>{const e=new RegExp(r.value.trim(),"i");t.forEach((t=>{const c=t.querySelector(".card-title");e.test(c.textContent)?t.parentNode.style.display="":t.parentNode.style.display="none"}))}))}(),function(){const e=document.querySelectorAll(".goods .card"),t=document.querySelector(".cart-wrapper"),c=document.getElementById("cart-empty"),n=document.querySelector(".counter"),o=document.querySelector(".cart-total span");function r(){const e=t.querySelectorAll(".card"),r=t.querySelectorAll(".card-price");n.textContent=e.length;let l=0;r.forEach((e=>{let t=parseFloat(e.textContent);l+=t})),o.textContent=l,0!==e.length?c.remove():t.appendChild(c)}e.forEach((e=>{e.querySelector("button").addEventListener("click",(()=>{const c=e.cloneNode(!0);t.appendChild(c),r();const n=c.querySelector(".btn");n.textContent="–£–¥–∞–ª–∏—Ç—å –∏–∑ –∫–æ—Ä–∑–∏–Ω—ã",n.addEventListener("click",(()=>{c.remove(),r()}))}))}))}(),function(){const e=document.getElementById("cart"),t=document.querySelector(".cart"),c=document.querySelector(".cart-close");e.addEventListener("click",(()=>{document.body.style.overflow="hidden",t.style.display="flex"})),c.addEventListener("click",(()=>{document.body.style.overflow="",t.style.display=""}))}()}))})();